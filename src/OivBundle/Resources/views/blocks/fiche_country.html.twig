<div class="fiche-country container ">
    <div class="row">
        <div class="info col-sm-12 col-md-12">
            <p class="text-center">
                Pour avoir une recheche avancée avec une comparaison des statistiques <a id="advancedSearch" href="/fr/statistiques/recherche?countryCode={{ countryCode }}&year={{ (("now"|date('Y'))-2) }}"> cliquer ici</a>
            </p>
            <p class="text-center">Cliquer sur une catégorie ou une série <a class="stat-type btn btn-default btn-xs">
                    <span class="glyphicon glyphicon-stats" aria-hidden="false" data-toggle="tooltip"></span>
                </a> pour avoir le détail des données</p>
            <div aria-label="...">
                <ul class="pager">
                    <li data-year="{{ selectedYear+1 }}" id="nextYear" class="next {% if selectedYear+1 > "now"|date('Y') %}disabled{% endif %}">
                        <a href="#">
                            <span class="year">{{ selectedYear+1 }}</span>
                            <span aria-hidden="true">&rarr;</span>
                        </a>
                    </li>
                    <li class="centred">
                        <img src="{% if selectedCountry.iso2|default() %}{{ asset('/bundles/oiv/css/flags-32/blank.gif') }}{% else %}{{ asset('/bundles/oiv/img/frontend/logo-small.png ')}}{% endif %}" class="flag flag-{{ selectedCountry.iso2|default('oiv')|lower }}"
                             alt="France"/>
                        <span id="country-name" data-statCountry="{{ selectedCountry.iso3|default('oiv') }}" data-statYear="{{ selectedYear }}" class="country">{{ selectedCountry.countryNameFr|default('World'|trans) }}</span>
                        {#{% if isMemberShip %}#}
                        <span id="currentYear" class="country">{{ selectedYear }}</span>
                        {#{% endif %}#}
                        <img src="{{ asset('/bundles/oiv/img/frontend/logo-small.png ')}}" class="flag flag-oiv" alt="OIV"/>
                    </li>
                    <li data-year="{{ selectedYear-1 }}" id="prevYear" class="previous">
                        <a href="#">
                            <span aria-hidden="true">&larr;</span>
                            <span class="year">{{ selectedYear-1 }}</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="thumbnail">
                <!--<img src="..." alt="...">-->
                <div class="caption">
                    <table class="products table block-table fixed-table">
                        <thead>
                            <th colspan="6" class="text-center"><span>{{ 'area'|trans }}</span> <span class="mesure"> ha</span></th>
                        </thead>
                        <tbody class="bg-wihte">
                        <tr id="area" data-measure="ha">
                            <td class=""> <a class="product float-left-">{{ 'Vignoble'|trans }} <span class="glyphicon glyphicon-info-sign" data-toggle="tooltip" title="{{ 'aide superficie'|trans }}"></span></a></td>
                            <td class="">
                                <a data-graph="container-g5" data-statType="prod" class=" stat-type btn btn-default btn-xs">
                                    <span class="glyphicon glyphicon-stats" aria-hidden="false" data-toggle="tooltip" title="voir statistiques"></span>
                                </a>
                                <span class="float-right"><span class="valStatType">{% if stats.globalArea.val|default(0) %}{{ (stats.globalArea.val)|number_format(0, '.',' ') }} {% else %} - {% endif %}</span></span>
                            </td>
                            <td colspan="4"></td>
                        </tr>
                        </tbody>
                    </table>
                    {#<table class="table block-table">#}
                        {#<thead>#}
                            {#<th colspan="3" class="text-center">{{ 'Individual Consumption'|trans }} <span class="glyphicon glyphicon-info-sign" data-toggle="tooltip" title="{{ 'aide superficie'|trans }}"></span></th>#}
                        {#</thead>#}
                        {#<tbody class="bg-wihte">#}
                        {#<tr>#}
                            {#<td class="text-center"><a>{{ 'Vin'|trans }} <br>{% if stats.rtableIndivCons.val|default(0) %}{{ (stats.rtableIndivCons.val)|number_format(0, '.',' ') }} (l/per capita +15) {% else %} 0  (l/per capita +15){% endif %}</a></td>#}
                            {#<td class="text-center"><a>{{ 'Raisin table'|trans }} <br>{% if stats.rfreshIndivCons.val|default(0) %}{{ (stats.rfreshIndivCons.val)|number_format(0, '.',' ') }} (kg/capita) {% else %} 0  (kg/capita){% endif %}</a></td>#}
                            {#<td class="text-center"><a>{{ 'Raisin Sec'|trans }} <br>{% if stats.rsecIndivCons.val|default(0) %}{{ (stats.rsecIndivCons.val)|number_format(0, '.',' ') }} (kg/capita) {% else %} 0  (kg/capita){% endif %}</a></td>#}
                        {#</tr>#}
                        {#</tbody>#}
                    {#</table>#}
                    <div class="search-list table-responsive table-wrapper-scroll-y table-fixed">
                        <table id="products" class="products table">
                            <thead>
                            <th></th>
                            <th><span>{{ 'production'|trans }}</span> <span class="mesure">{{ 'tonnes'|trans }}</span></th>
                            <th><span>{{ 'export'|trans }}</span> <span class="mesure">{{ 'tonnes'|trans }}</span></th>
                            <th><span>{{ 'import'|trans }}</span> <span class="mesure">{{ 'tonnes'|trans }}</span></th>
                            <th><span>{{ 'consumption'|trans }}</span> <span class="mesure">{{ 'tonnes'|trans }}</span></th>
                            <th><span>{{ 'consumption'|trans }}</span> <span class="mesure">{{ 'kg/capita'|trans }}</span></th>
                            </thead>
                            <tbody>
                            {% for product in stats.products %}
                                {% if product.name != 'rin' and product.name != 'area' %}
                                <tr id="{{ product.name }}" data-measure="{{ product.measure|default() }}">
                                    <td>
                                        <a class="product" data-graph="container-g{{ loop.index }}" href="#">
                                            {{ product.label|trans }} <span class="glyphicon glyphicon-info-sign" data-toggle="tooltip" title="{{ product.label|trans }}"></span>
                                        </a>
                                    </td>
                                    <td>
                                        <div class="display-flex-">
                                            <span class="float-right">{{ product.stat.prod is null ? '<span class="valStatType">-</span>':('<span class="valStatType">'~ product.stat.prod|number_format(0, '.',' ') ~ '</span> ' )|raw }}</span>
                                            <a data-graph="container-g{{ loop.index }}" data-statType="prod" class="float-left stat-type btn btn-default btn-xs">
                                                <span class="glyphicon glyphicon-stats" aria-hidden="false" data-toggle="tooltip" title="voir statistiques"></span>
                                            </a>
                                        </div>
                                    </td>
                                    <td class="product" data-graph="container-g{{ loop.index }}">
                                        <div class="display-flex-">
                                            <span class="float-right">{{ product.stat.export is null ? '<span class="valStatType">-</span>':('<span class="valStatType">'~ product.stat.export|number_format(0, '.',' ') ~ '</span> ' )|raw }}</span>
                                            <a data-graph="container-g{{ loop.index }}" data-statType="export" class="float-left stat-type btn btn-default btn-xs">
                                                <span class="glyphicon glyphicon-stats" aria-hidden="false" data-toggle="tooltip" title="voir statistiques"></span>
                                            </a>
                                        </div>
                                    </td>
                                    <td class="product" data-graph="container-g{{ loop.index }}">
                                        <div class="display-flex-">
                                            <span class="float-right">{{ product.stat.import is null ? '<span class="valStatType">-</span>':('<span class="valStatType">'~ product.stat.import|number_format(0, '.',' ') ~ '</span> ' )|raw }}</span>
                                            <a data-graph="container-g{{ loop.index }}" data-statType="import" class="float-left stat-type btn btn-default btn-xs">
                                                <span class="glyphicon glyphicon-stats" aria-hidden="false" data-toggle="tooltip" title="voir statistiques"></span>
                                            </a>
                                        </div>
                                    </td>
                                    <td class="product" data-graph="container-g{{ loop.index }}">
                                        <div class="display-flex-">
                                            <span class="float-right">{{ product.stat.consumption is null ? '<span class="valStatType">-</span>':('<span class="valStatType">'~ product.stat.consumption|number_format(0, '.',' ') ~ '</span> ' )|raw }}</span>
                                            <a data-graph="container-g{{ loop.index }}" data-statType="consumption" class="float-left stat-type btn btn-default btn-xs">
                                                <span class="glyphicon glyphicon-stats" aria-hidden="false" data-toggle="tooltip" title="voir statistiques"></span>
                                            </a>
                                        </div>
                                    </td>
                                    <td class="product" data-graph="container-g{{ loop.index }}">
                                        <div class="display-flex-">
                                            <span class="float-right">{{ product.stat.indovcons is null ? '<span class="valStatType">-</span>':('<span class="valStatType">'~ product.stat.indovcons|number_format(0, '.',' ') ~ '</span> ' )|raw }}</span>
                                            <a data-graph="container-g{{ loop.index }}" data-statType="indovcons" class="float-left stat-type btn btn-default btn-xs">
                                                <span class="glyphicon glyphicon-stats" aria-hidden="false" data-toggle="tooltip" title="voir statistiques"></span>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                                {% endif %}
                            {% endfor %}
                            </tbody>
                        </table>
                        <table id="products" class="products table">
                            <thead>
                            <th></th>
                            <th><span>{{ 'production'|trans }}</span> <span class="mesure">{{ '1000 hl'|trans }}</span></th>
                            <th><span>{{ 'export'|trans }}</span> <span class="mesure">{{ '1000 hl'|trans }}</span></th>
                            <th><span>{{ 'import'|trans }}</span> <span class="mesure">{{ '1000 hl'|trans }}</span></th>
                            <th><span>{{ 'consumption'|trans }}</span> <span class="mesure">{{ '1000 hl'|trans }}</span></th>
                            <th><span>{{ 'consumption'|trans }}</span> <span class="mesure">{{ 'l/capita +15'|trans }}</span></th>
                            </thead>
                            <tbody>
                            {% for product in stats.products %}
                                {% if product.name == 'rin'  %}
                                    <tr id="{{ product.name }}" data-measure="{{ product.measure|default() }}">
                                        <td>
                                            <a class="product" data-graph="container-g{{ loop.index }}" href="#">
                                                {{ product.label|trans }} <span class="glyphicon glyphicon-info-sign" data-toggle="tooltip" title="{{ product.label|trans }}"></span>
                                            </a>
                                        </td>
                                        <td>
                                            <div class="display-flex-">
                                                <span class="float-right">{{ product.stat.prod is null ? '<span class="valStatType">-</span>':('<span class="valStatType">'~ product.stat.prod|number_format(0, '.',' ') ~ '</span> ' )|raw }}</span>
                                                <a data-graph="container-g{{ loop.index }}" data-statType="prod" class="float-left stat-type btn btn-default btn-xs">
                                                    <span class="glyphicon glyphicon-stats" aria-hidden="false" data-toggle="tooltip" title="voir statistiques"></span>
                                                </a>
                                            </div>
                                        </td>
                                        <td class="product" data-graph="container-g{{ loop.index }}">
                                            <div class="display-flex-">
                                                <span class="float-right">{{ product.stat.export is null ? '<span class="valStatType">-</span>':('<span class="valStatType">'~ product.stat.export|number_format(0, '.',' ') ~ '</span> ' )|raw }}</span>
                                                <a data-graph="container-g{{ loop.index }}" data-statType="export" class="float-left stat-type btn btn-default btn-xs">
                                                    <span class="glyphicon glyphicon-stats" aria-hidden="false" data-toggle="tooltip" title="voir statistiques"></span>
                                                </a>
                                            </div>
                                        </td>
                                        <td class="product" data-graph="container-g{{ loop.index }}">
                                            <div class="display-flex-">
                                                <span class="float-right">{{ product.stat.import is null ? '<span class="valStatType">-</span>':('<span class="valStatType">'~ product.stat.import|number_format(0, '.',' ') ~ '</span> ' )|raw }}</span>
                                                <a data-graph="container-g{{ loop.index }}" data-statType="import" class="float-left stat-type btn btn-default btn-xs">
                                                    <span class="glyphicon glyphicon-stats" aria-hidden="false" data-toggle="tooltip" title="voir statistiques"></span>
                                                </a>
                                            </div>
                                        </td>
                                        <td class="product" data-graph="container-g{{ loop.index }}">
                                            <div class="display-flex-">
                                                <span class="float-right">{{ product.stat.consumption is null ? '<span class="valStatType">-</span>':('<span class="valStatType">'~ product.stat.consumption|number_format(0, '.',' ') ~ '</span> ' )|raw }}</span>
                                                <a data-graph="container-g{{ loop.index }}" data-statType="consumption" class="float-left stat-type btn btn-default btn-xs">
                                                    <span class="glyphicon glyphicon-stats" aria-hidden="false" data-toggle="tooltip" title="voir statistiques"></span>
                                                </a>
                                            </div>
                                        </td>
                                        <td class="product" data-graph="container-g{{ loop.index }}">
                                            <div class="display-flex-">
                                                <span class="float-right">{{ product.stat.indovcons is null ? '<span class="valStatType">-</span>':('<span class="valStatType">'~ product.stat.indovcons|number_format(0, '.',' ') ~ '</span> ' )|raw }}</span>
                                                <a data-graph="container-g{{ loop.index }}" data-statType="indovcons" class="float-left stat-type btn btn-default btn-xs">
                                                    <span class="glyphicon glyphicon-stats" aria-hidden="false" data-toggle="tooltip" title="voir statistiques"></span>
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <table class="table block-table">
                        <thead>
                            <th class="text-center">
                                {{ 'Varieties'|trans }}
                                <span class="glyphicon glyphicon-info-sign" aria-hidden="false" data-toggle="tooltip" title="{{ 'total count variety'|trans }}"></span>
                            </th>
                            <th class="text-center">
                                IG/AO <span class="glyphicon glyphicon-info-sign" aria-hidden="false" data-toggle="tooltip" title="Nombre d'appelation géographique"></span>
                            </th>
                            <th class="text-center">
                                {{ 'Education'|trans }}
                                <span class="glyphicon glyphicon-info-sign" aria-hidden="false" data-toggle="tooltip" title="{{ 'total count education'|trans }}"></span>
                            </th>
                        </thead>
                        <tbody class="bg-wihte">
                        <tr>
                            <td class="text-center">
                                <a class="btn-global-country-search" data-dbType="variety" href="javascript:;">
                                    {{ stats.nbVariety|number_format(0, '.',' ') }} <i class="glyphicon glyphicon-search"></i>
                                </a>
                            </td>
                            <td class="text-center">
                                <a class="btn-global-country-search" data-dbType="naming" href="javascript:;">
                                    {{ stats.nbNaming|number_format(0, '.',' ') }} <i class="glyphicon glyphicon-search"></i>
                                </a>
                            </td>
                            <td class="text-center">
                                <a class="btn-global-country-search" data-dbType="education" href="javascript:;">
                                    {{ stats.nbEducation|number_format(0, '.',' ') }} <i class="glyphicon glyphicon-search"></i>
                                </a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div id="container-graph" class="info col-sm-12 col-md-12">
            <h2 class="text-center">
                GRAPHIQUE
                <a data-graph="container-g1" data-stattype="import" class="stat-type btn btn-default btn-xs">
                    <span class="glyphicon glyphicon-stats" aria-hidden="false" data-toggle="tooltip"></span>
                </a>
            </h2>

            <div id="container-g1" class="hide graph" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
            <div id="container-g2" class="hide graph" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
            <div id="container-g3" class="hide graph" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
            <div id="container-g4" class="hide graph" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
            <div id="container-g5" class="hide graph" style="min-width: 310px; height: 400px; margin: 0 auto"></div>

            <script type="text/javascript">
                $(document).ready(function () {
                    setTimeout(function() {
                        var lang = {
                            downloadCSV: "{{ ('Download CSV'|trans)|raw }}",
                            downloadJPEG: "{{ ('Download JPEG image'|trans)|raw }}",
                            downloadPDF: "{{ ('Download PDF document'|trans)|raw }}",
                            downloadPNG: "{{ ('Download PNG image'|trans)|raw }}",
                            downloadSVG: "{{ ('Download SVG vector image'|trans)|raw }}",
                            downloadXLS: "{{ ('Download XLS'|trans)|raw }}"
                        };
                        $.handleSearch._trans = {{ transData|json_encode|raw }};
                        $.handleSearch._g1 = jQuery.extend(true, {}, $.statCharts);
                        $.handleSearch._g2 = jQuery.extend(true, {}, $.statCharts);
                        $.handleSearch._g3 = jQuery.extend(true, {}, $.statCharts);
                        $.handleSearch._g4 = jQuery.extend(true, {}, $.statCharts);
                        $.handleSearch._g5 = jQuery.extend(true, {}, $.statCharts);

                        $.handleSearch._g1._container = 'container-g1';
                        $.handleSearch._g1._xAxis = {{ stats.graphProducts.xAxis|json_encode|raw }};
                        $.handleSearch._g1._data = {{ stats.graphProducts.yAxis.rfresh|json_encode|raw }};
                        $.handleSearch._g1._title = {{ (stats.products.0.label|trans)|json_encode|raw  }};
                        {#$.handleSearch._g1._mesure = '{{ stats.products.0.measure |raw }}';#}
                        $.handleSearch._g1._mesure = 'tonnes';
                        $.handleSearch._g1._lang =  lang;
                        $.handleSearch._g1._init();

                        $.handleSearch._g2._container = 'container-g2';
                        $.handleSearch._g2._xAxis = {{ stats.graphProducts.xAxis|json_encode|raw }};
                        $.handleSearch._g2._data = {{ stats.graphProducts.yAxis.rin|json_encode|raw }};
                        $.handleSearch._g2._title = {{ (stats.products.1.label|trans)|json_encode|raw  }};
                        {#$.handleSearch._g2._mesure = '{{ stats.products.1.measure |raw }}';#}
                        $.handleSearch._g2._mesure = '1000 hl';
                        $.handleSearch._g2._lang =  lang;
                        $.handleSearch._g2._init();

                        $.handleSearch._g3._container = 'container-g3';
                        $.handleSearch._g3._xAxis = {{ stats.graphProducts.xAxis|json_encode|raw }};
                        $.handleSearch._g3._data = {{ stats.graphProducts.yAxis.rtable|json_encode|raw }};
                        $.handleSearch._g3._title = {{ (stats.products.2.label|trans)|json_encode|raw  }};
                        {#$.handleSearch._g3._mesure = '{{ stats.products.2.measure |raw }}';#}
                        $.handleSearch._g3._mesure = 'tonnes';
                        $.handleSearch._g3._lang =  lang;
                        $.handleSearch._g3._init();

                        $.handleSearch._g4._container = 'container-g4';
                        $.handleSearch._g4._xAxis = {{ stats.graphProducts.xAxis|json_encode|raw }};
                        $.handleSearch._g4._data = {{ stats.graphProducts.yAxis.rsec|json_encode|raw }};
                        $.handleSearch._g4._title = {{ (stats.products.3.label|trans)|json_encode|raw  }};
                        {#$.handleSearch._g4._mesure = '{{ stats.products.3.measure |raw }}';#}
                        $.handleSearch._g4._mesure = 'tonnes';
                        $.handleSearch._g4._lang =  lang;

                        $.handleSearch._g5._container = 'container-g5';
                        $.handleSearch._g5._xAxis = {{ stats.graphProducts.xAxis|json_encode|raw }};
                        $.handleSearch._g5._data = {{ stats.graphProducts.yAxis.area|json_encode|raw }};
                        $.handleSearch._g5._title = {{ (stats.products.4.label|trans)|json_encode|raw  }};
                        {#$.handleSearch._g4._mesure = '{{ stats.products.3.measure |raw }}';#}
                        $.handleSearch._g5._mesure = 'ha';
                        $.handleSearch._g5._lang =  lang;
                        $.handleSearch._g5._init();
                        $('.highcharts-credits').remove();
                    });
                });
            </script>
        </div>
    </div>
</div>